#ifndef MQTT_MNG_H_
#define MQTT_MNG_H_

//=============================================================================
/*-------------------------------- Includes ---------------------------------*/
//=============================================================================
#include "stdint.h"
#include "stddef.h"

#include "core_mqtt.h"
//============================================================================

//=============================================================================
/*------------------------------- Definitions -------------------------------*/
//=============================================================================
typedef void (* mqttmngSubscrCb_t )( MQTTContext_t * pContext, MQTTPublishInfo_t * pPublishInfo );

typedef int32_t (*mqttmngLock_t)(uint32_t timeout);
typedef void (*mqttmngUnlock_t)(void);

typedef struct 
{
    uint8_t retain;
    uint8_t dup;
    const void * data;
    uint32_t size;
} mqttmngPayload_t;

//=============================================================================

//=============================================================================
/*-------------------------------- Functions --------------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
int32_t mqttmngInit(mqttmngLock_t lock, mqttmngUnlock_t unlock, MQTTPublishInfo_t *lastWillInfo);
//-----------------------------------------------------------------------------
void mqttmngRun(void);
//-----------------------------------------------------------------------------
int32_t mqttmngPublishComponent(const char *name, const char *type, const char *flags);
//-----------------------------------------------------------------------------
int32_t mqttmngPublish(const char *topic, mqttmngPayload_t *payload);
//-----------------------------------------------------------------------------
int32_t mqttmngSubscribe(const char *topic, mqttmngSubscrCb_t callback);
//-----------------------------------------------------------------------------
int mqttmngInitDone(void);
//-----------------------------------------------------------------------------
//=============================================================================

#endif /* MQTT_MNG_H_ */
