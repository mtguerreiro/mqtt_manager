
//=============================================================================
/*-------------------------------- Includes ---------------------------------*/
//=============================================================================
#include "task_wdt.h"

/* Kernel */
#include "FreeRTOS.h"
#include "task.h"

/* Device and drivers */
#include "pico/stdlib.h"
#include "hardware/watchdog.h"

//=============================================================================

//=============================================================================
/*--------------------------------- Defines ---------------------------------*/
//=============================================================================

//=============================================================================

//=============================================================================
/*--------------------------------- Globals ---------------------------------*/
//=============================================================================

//=============================================================================

//=============================================================================
/*-------------------------------- Prototypes -------------------------------*/
//=============================================================================
static void taskWdtInit(void);
//=============================================================================

//=============================================================================
/*---------------------------------- Task -----------------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
void taskWdt(void *param){

    taskWdtInit();

    while(1){
        
        watchdog_update();
        vTaskDelay(TASK_WDT_CONFIG_DEFAULT_PERIOD_MS / portTICK_PERIOD_MS);
    }
}
//-----------------------------------------------------------------------------
//=============================================================================

//=============================================================================
/*---------------------------- Static functions -----------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
static void taskWdtInit(void){

    watchdog_enable(2 * TASK_WDT_CONFIG_DEFAULT_PERIOD_MS, 1);
}
//-----------------------------------------------------------------------------
//=============================================================================
