#ifndef MQTT_MNG_H_
#define MQTT_MNG_H_

//=============================================================================
/*-------------------------------- Includes ---------------------------------*/
//=============================================================================
#include "stdint.h"
#include "stddef.h"

// #include "MQTTClient.h"
#include "mqttmngConfig.h"
#include "mqtt_subscription_manager.h"
//============================================================================

//=============================================================================
/*------------------------------- Definitions -------------------------------*/
//=============================================================================
typedef int32_t (*mqttmngLock_t)(uint32_t timeout);
typedef void (*mqttmngUnlock_t)(void);

#define MQTT_MNG_COMPONENT_STR(comp) 

typedef SubscriptionManagerCallback_t mqttmngSubscrCb_t;

typedef struct 
{
    uint8_t retain;
    uint8_t dup;
    const void * data;
    uint32_t size;
} mqttmngPayload_t;

//=============================================================================

//=============================================================================
/*-------------------------------- Functions --------------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
int32_t mqttmngInit(mqttmngLock_t lock, mqttmngUnlock_t unlock);
//-----------------------------------------------------------------------------
void mqttmngRun(void);
//-----------------------------------------------------------------------------
int32_t mqttmngAddComponent(uint32_t id, const char *name, const char *type, const char *flags);
//-----------------------------------------------------------------------------
int32_t mqttmngPublish(uint32_t id, const char *comptopic, mqttmngPayload_t *payload);
//-----------------------------------------------------------------------------
int32_t mqttmngSubscribe(uint32_t id, const char *topic, mqttmngSubscrCb_t callback);
//-----------------------------------------------------------------------------
int mqttmngIsIdWaitingAck(uint16_t id);
//-----------------------------------------------------------------------------
//=============================================================================

#endif /* MQTT_MNG_H_ */
